$id: http://adidas.com/api/HAL

title: JSON Hypertext Application Language
description: Definition of [HAL message format](https://tools.ietf.org/html/draft-kelly-json-hal-08)
type: object

properties:
  _links:
    type: object
    additionalProperties:
      # WARN: "anyOf" is not supported in OAS2
      anyOf:
      - $ref: '#/definitions/halLinkObject'
      - type: array
        items:
          - $ref: '#/definitions/halLinkObject'
    properties:
      curies:
        # WARN: "anyOf" is not supported in OAS2
        anyOf:
          - $ref: '#/definitions/halCuriesLink'
          - type: array
            items:
              - $ref: '#/definitions/halCuriesLink'
  _embedded:
    type: object
    # WARN: Apiary doesn't support circular references
    additionalProperties:
      anyOf:
        - $ref: '#/definitions/hal_resource'
        - type: array
          items:
            - $ref: '#/definitions/hal_resource'

definitions:
  halLinkObject:
    title: HAL Link Object
    type: object
    properties:
      href:
        type: string
      templated:
        type: boolean
      #
      # WARN: Some version of OAS parser can have problem with property being called "type"
      # resulting in the error 'Schema "type" key must be a string'.
      #
      # For this reason we have commented out the "type" property of the link object.
      # See https://tools.ietf.org/html/draft-kelly-json-hal-08#section-5.3 for the definiton of
      # HAL's link object type property.
      #
      # type:
      #  type: string
      deprecation:
        type: string
      name:
        type: string
      profile:
        type: string
      title:
        type: string
      hreflang:
        type: string
    required:
      - href        

  halCuriesLink:
    title: HAL Curies Link
    allOf:
      - type: object
        properties:
          templated:
            enum:
              - true
        required:
          - templated
      - $ref: '#/definitions/halLinkObject'
